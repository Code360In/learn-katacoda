# Goal:

このシナリオを実施することで、Red Hat Enterprise Linux 8で提供されるeBPFをつかった観測ツールについて理解を深めることができます。


# このシナリオで扱うコンセプト
* bcc-toolsをインストールする
* bpftool でeBPFの利用状況を確認する
* eBPFトレーシングツールを利用して、コンセプトを理解する

# 利用例:

このラボでは、bcc-toolsパッケージに含まれるツールを使って、 `yum update` 時にシステムで何が起きているかを分析します。 `yum update` は動作が自明ではない実世界のアプリケーションの例として選ばれていて、以下を行います。

* 設定されたリポジトリへのTCP接続が確率されます。それを `gethostlatency` と `tcplife` で追跡します。
* XFSファイルシステム上で多くのファイルがopenされます。それを `filetop` で観測し、さらに `xfsslower` でどのXFS操作の実行に10ms以上かかっているかを調べます。
* メモリアクセスが行われます。必要な情報へアクセスする際にディスクへアクセスするよりも高速になるよう、Linuxはメモリキャッシュを活用しています。 `cachestat` を使うことで、キャッシュヒットとミスヒットをリアルタイムに観測できます。Linuxが必要とする全ての情報がキャッシュされている場合はミスはゼロで、キャッシュが生成されている間は多くのミスを観測できます。キャッシュのサイズを越えてキャッシュが生成されつづける場合、LinuxはLRU(Least Recentrly Used)アルゴリズムと多くのヒューリスティックを利用して、一部のキャッシュされたデータは削除されて新しいデータと置き換えられます。

