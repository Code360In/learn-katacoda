# Use systemd to control and manage container processes

Podman makes putting a container into *systemd* service simple. To generate a service for a container -

`podman generate systemd mssqlserver-restored > container-mssql.service`{{execute T2}}

Now, let us take a brief look at the service file that was generated -

`cat container-mssql.service`{{execute T2}}

<pre class="file">
# container-ea72c83f945af03d2b03fedd21c3b6743310b7cacc77d6152f453c37cc8cf56c.service
# autogenerated by Podman 1.6.4
# Wed Aug 19 04:11:19 EDT 2020

[Unit]
Description=Podman container-ea72c83f945af03d2b03fedd21c3b6743310b7cacc77d6152f453c37cc8cf56c.service
Documentation=man:podman-generate-systemd(1)

[Service]
Restart=on-failure
ExecStart=/usr/bin/podman start ea72c83f945af03d2b03fedd21c3b6743310b7cacc77d6152f453c37cc8cf56c
ExecStop=/usr/bin/podman stop -t 10 ea72c83f945af03d2b03fedd21c3b6743310b7cacc77d6152f453c37cc8cf56c
KillMode=none
Type=forking
PIDFile=/var/run/containers/storage/overlay-containers/ea72c83f945af03d2b03fedd21c3b6743310b7cacc77d6152f453c37cc8cf56c/userdata/conmon.pid

[Install]
WantedBy=multi-user.target
</pre>

Before we can use systemd to manage the container, lets copy over the generated service file to systemd config

`cp container-mssql.service ~/.config/systemd/root/`{{execute T2}}

$ systemctl --user daemon-reload
$ systemctl --user start container.service
$ systemctl --user status container.service 

The generated systemd service file can now be used to manage the container via systemd.



> Let's find out the UserID of the user who has the highest total price items in their shopping cart  

`/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P 'RedHat1!' -d imoltp -N -C -Q "SELECT top 1 UserID FROM dbo.ShoppingCart order by TotalPrice desc
`{{execute T3}} 

<pre class="file">
UserID
-----------
        342

(1 rows affected)
</pre>

The T-SQL query answers on the restored container are same as the T-SQL query answers on the container before the checkpoint was taken.
